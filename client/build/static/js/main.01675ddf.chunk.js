(this.webpackJsonpfirstboard=this.webpackJsonpfirstboard||[]).push([[0],{134:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(23),r=a.n(c),o=a(29),s=a(9),i=a(11),l=a(21),d=a.n(l),j=a.p+"static/media/2.e43f4c64.png",u=a(19),b=(a(134),a(1));var h=function(e){var t=e.postPerPage,a=e.totalBoards,n=e.paginate,c=[];console.log("pageNumbers : ",c);for(var r=0;r<Math.ceil(a/t);r++)c.push(r);return Object(b.jsx)("nav",{className:"btn",children:Object(b.jsx)("ul",{className:"pagination",children:c.map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)("a",{onClick:function(){return n(e+1)},href:"#/0",children:e+1})},e)}))})})};var p=function(){var e=Object(u.c)((function(e){return e.user}));console.log(localStorage),console.log("UserID : ",e);var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(1),l=Object(i.a)(s,2),p=l[0],x=l[1],O=Object(n.useState)(10),g=Object(i.a)(O,1)[0],f=p*g,m=f-g,y=c.slice(m,f),v=function(){console.log("BoardList : ",c),console.log(y.length),console.log("indexFirstBoard : ",m),console.log("indexLastBoard : ",f),console.log("postPerPage : ",g)};Object(n.useEffect)((function(){d.a.get("/api/board/getBoardList?id=".concat(localStorage.userID)).then((function(e){console.log("ID : ",e.data.board),e.data.board.length>0?r(e.data.board):alert("\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4!")}))}),[]);var w=y.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{style:{border:"1px solid black"},children:Object(b.jsx)(o.b,{to:"/board/".concat(e.id),children:e.createDate})}),Object(b.jsx)("th",{style:{border:"1px solid black"},children:Object(b.jsx)(o.b,{to:"/board/".concat(e.id),children:e.title})})]},t)}));return e.userData&&!e.userData.isAuth&&void 0!==c?Object(b.jsxs)("div",{className:"main",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)("img",{src:j,style:{marginTop:"70px"},width:"100%",height:"300px",alt:"study",onClick:v}),Object(b.jsxs)("table",{style:{width:"70%",border:"1px solid black"},children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{style:{border:"1px solid black"},children:"\ub0a0\uc9dc"}),Object(b.jsx)("th",{style:{border:"1px solid black"},children:"\uae00 \uc81c\ubaa9"})]})}),Object(b.jsx)("tbody",{})]})]}):Object(b.jsxs)("div",{className:"main",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)("img",{src:j,style:{marginTop:"70px"},width:"100%",height:"300px",alt:"study",onClick:v}),Object(b.jsxs)("table",{style:{width:"70%",border:"1px solid black"},children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{style:{border:"1px solid black"},children:"\ub0a0\uc9dc"}),Object(b.jsx)("th",{style:{border:"1px solid black"},children:"\uae00 \uc81c\ubaa9"})]})}),Object(b.jsx)("tbody",{children:w})]}),Object(b.jsx)(h,{postPerPage:g,totalBoards:c.length,paginate:function(e){return x(e)}})]})},x="login_user",O="register_user",g="auth_user";function f(e){var t=d.a.post("/api/users/register",e).then((function(e){return e.data}));return{type:O,payload:t}}function m(){var e=d.a.get("/api/users/auth").then((function(e){return e.data}));return{type:g,payload:e}}var y=Object(s.f)((function(e){var t=Object(u.b)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),j=l[0],h=l[1];return Object(b.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},children:Object(b.jsxs)("form",{style:{display:"flex",flexDirection:"column"},onSubmit:function(a){a.preventDefault(),console.log("Email",r),console.log("Password",j),t(function(e){var t=d.a.post("/api/users/login",e).then((function(e){return e.data}));return{type:x,payload:t}}({email:r,password:j})).then((function(t){console.log("RES : ",t),t.payload.loginSuccess?(window.localStorage.setItem("userID",t.payload.userId),e.history.push("/")):alert("Error")}))},children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",value:r,onChange:function(e){o(e.currentTarget.value)}}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",value:j,onChange:function(e){h(e.currentTarget.value)}}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{children:"Login"})]})})})),v=a(53),w=a.n(v),D=a(97);var S=function(e){var t=Object(u.b)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),d=l[0],j=l[1],h=Object(n.useState)(""),p=Object(i.a)(h,2),x=p[0],O=p[1],g=Object(n.useState)(""),m=Object(i.a)(g,2),y=m[0],v=m[1],S=function(){var a=Object(D.a)(w.a.mark((function a(n){return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),console.log("Email",r),console.log("Name",d),console.log("Password",x),console.log("ConfirmPassword",y),x===y){a.next=7;break}return a.abrupt("return",alert("\ube44\ubc00\ubc88\ud638\uc640 \ube44\ubc00\ubc88\ud638 \ud655\uc778\uc774 \ub2e4\ub985\ub2c8\ub2e4!"));case 7:t(f({email:r,name:d,password:x})).then((function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)}));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},children:Object(b.jsxs)("form",{style:{display:"flex",flexDirection:"column"},onSubmit:S,children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",value:r,onChange:function(e){o(e.currentTarget.value)},placeholder:"Enter email"}),Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",{type:"text",value:d,onChange:function(e){j(e.currentTarget.value)}}),Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",value:x,onChange:function(e){O(e.currentTarget.value)}}),Object(b.jsx)("label",{children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",value:y,onChange:function(e){v(e.currentTarget.value)}}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{children:"\ud68c\uc6d0 \uac00\uc785"})]})})})},I=a(155);a(84);var _=Object(s.f)((function(e){var t=Object(u.c)((function(e){return e.user}));return t.userData&&!t.userData.isAuth?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(I.a,{className:"right__menu",children:[Object(b.jsx)(I.a.Item,{children:Object(b.jsx)("a",{href:"/login",children:"Signin"})},"login"),Object(b.jsx)(I.a.Item,{children:Object(b.jsx)("a",{href:"/register",children:"Signup"})},"register")]})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(I.a,{className:"right__menu",children:[Object(b.jsx)(I.a.Item,{children:Object(b.jsx)("a",{href:"/board/write",children:"\uae00 \uc4f0\uae30"})},"write"),Object(b.jsx)(I.a.Item,{onClick:function(){d.a.get("/api/users/logout").then((function(t){t.data.success?e.history.push("/login"):alert("\ub85c\uadf8\uc544\uc6c3 \uc2e4\ud328!")}))},children:"Logout"},"app")]})})}));var C=function(){return Object(b.jsxs)("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"},children:[Object(b.jsx)("div",{className:"menu__logo",children:Object(b.jsx)("a",{href:"/",children:"Today I Learned"})}),Object(b.jsx)("div",{className:"menu__container",children:Object(b.jsx)("div",{className:"menu_right",children:Object(b.jsx)(_,{mode:"horizontal"})})})]})},T=a(157),k=a(61),E=a(62),B=a.n(E);var N=function(e){var t=Object(u.c)((function(e){return e.user})),a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),j=l[0],h=l[1];return Object(b.jsxs)("div",{style:{paddingTop:"200px",marginLeft:"10%",marginRight:"10%"},children:[Object(b.jsx)("h2",{style:{marginLeft:"45%"},children:"\uae00\uc4f0\uae30"}),Object(b.jsx)("input",{type:"text",placeholder:"\uae00 \uc81c\ubaa9",style:{marginBottom:"10px",width:"100%"},value:r,onChange:function(e){o(e.currentTarget.value)}}),Object(b.jsx)(k.CKEditor,{editor:B.a,onChange:function(e,t){!function(e,t){h(t.getData())}(0,t)}}),Object(b.jsx)(T.a,{onClick:function(a){a.preventDefault(),console.log("Title",r),console.log("Data",j);var n=j.replace(/&nbsp;/gi,"");n=(n=(n=n.replace(/(<([^>]+)>)/gi,"")).replace(/<br\/>/gi,"\n")).replace(/<(\/)?([a-zA-Z]*)(\s[a-zA-Z]*=[^>]*)?(\s)*(\/)?>/gi,""),console.log("Text",n),console.log("writer",t.userData._id);var c={writer:t.userData._id,title:r,content:n};d.a.post("/api/board/write",c).then((function(t){console.log("response.data :",t.data),t.data.success?e.history.push("/"):alert("\uae00 \uc4f0\uae30\ub97c \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4!")}))},style:{marginTop:"10px",marginLeft:"45%"},children:"\uc800\uc7a5\ud558\uae30"})]})};var L=function(e){console.log(e.match);var t=e.match.params.boardId,a={boardId:t},c=Object(n.useState)(null),r=Object(i.a)(c,2),s=r[0],l=r[1];return Object(n.useEffect)((function(){d.a.post("/api/board/getBoardDetail",a).then((function(e){e.data.success?(console.log("variable",a),console.log("BoardDetail : ",e.data.boardDetail),l(e.data.boardDetail)):alert("\uc815\ubcf4\ub4e4\uc744 \uac00\uc838\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4!")}))}),[]),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},children:[null!==s&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("label",{style:{marginBottom:"20px",width:"500px",border:"1px solid black",paddingLeft:"10px",fontSize:"20px"},children:[console.log("Board.title : ",s[0]),s[0].title]}),Object(b.jsxs)("ul",{style:{width:"500px",height:"400px",border:"1px solid black",marginBottom:"30px",paddingTop:"10px",paddingLeft:"15px",fontSize:"20px"},children:[console.log("Board.content : ",s[0]),s[0].content]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(o.b,{to:"/board/".concat(t,"/update"),children:Object(b.jsx)(T.a,{style:{marginRight:"50px"},children:"\uae00 \uc218\uc815"})}),Object(b.jsx)(T.a,{onClick:function(){d.a.post("/api/board/deleteBoard",s).then((function(e){e.data.success?window.location.href="/":alert("\uc0ad\uc81c\ub97c \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4!")}))},children:"\uae00 \uc0ad\uc81c"})]})]})};var P=function(e){var t=e.match.params.boardId,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),j=l[0],u=l[1];return Object(b.jsxs)("div",{style:{paddingTop:"200px",marginLeft:"10%",marginRight:"10%"},children:[Object(b.jsx)("h2",{style:{marginLeft:"45%"},children:"\uae00 \uc4f0\uae30"}),Object(b.jsx)("input",{type:"text",placeholder:"\uae00 \uc81c\ubaa9",style:{marginBottom:"10px",width:"100%"},value:r,onChange:function(e){o(e.currentTarget.value)}}),Object(b.jsx)(k.CKEditor,{editor:B.a,onChange:function(e,t){!function(e,t){u(t.getData())}(0,t)}}),Object(b.jsx)(T.a,{onClick:function(a){a.preventDefault(),console.log(e),console.log(a),console.log("Title",r),console.log("Data",j);var n=j.replace(/&nbsp;/gi,"");n=(n=(n=n.replace(/(<([^>]+)>)/gi,"")).replace(/<br\/>/gi,"\n")).replace(/<(\/)?([a-zA-Z]*)(\s[a-zA-Z]*=[^>]*)?(\s)*(\/)?>/gi,""),console.log("Text",n);var c={boardId:t,title:r,content:n};d.a.post("/api/board/updateBoard",c).then((function(a){a.data.success?e.history.push("/board/".concat(t)):alert("\uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4!")}))},style:{marginTop:"10px",marginLeft:"45%"},children:"\uc218\uc815\ud558\uae30"})]})},z=a(33);function A(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=function(c){var r=Object(u.c)((function(e){return e.user})),o=Object(u.b)();return Object(n.useEffect)((function(){o(m()).then((function(e){console.log("asdf : ",e),e.payload.isAuth?(a&&!e.payload.isAdmin||!1===t)&&c.history.push("/"):t&&c.history.push("/login")}))}),[]),Object(b.jsx)(e,Object(z.a)(Object(z.a)({},c),{},{user:r}))};return c}var R=function(){return Object(b.jsxs)(o.a,{children:[Object(b.jsx)(C,{}),Object(b.jsxs)(s.c,{children:[Object(b.jsx)(s.a,{exact:!0,path:"/",component:A(p,null)}),Object(b.jsx)(s.a,{exact:!0,path:"/login",component:A(y,!1)}),Object(b.jsx)(s.a,{exact:!0,path:"/register",component:A(S,!1)}),Object(b.jsx)(s.a,{exact:!0,path:"/board/write",component:A(N,!0)}),Object(b.jsx)(s.a,{exact:!0,path:"/board/:boardId",component:A(L,null)}),Object(b.jsx)(s.a,{exact:!0,path:"/board/:boardId/update",component:A(P,!0)})]})]})},F=a(51),X=a(106),Z=a.n(X),U=a(107),J=Object(F.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(z.a)(Object(z.a)({},e),{},{register:t.payload});case x:return Object(z.a)(Object(z.a)({},e),{},{loginSucces:t.payload});case g:return Object(z.a)(Object(z.a)({},e),{},{userData:t.payload});default:return e}}}),K=Object(F.a)(Z.a,U.a)(F.c);r.a.render(Object(b.jsx)(u.a,{store:K(J,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(b.jsx)(o.a,{children:Object(b.jsx)(R,{})})}),document.getElementById("root"))},84:function(e,t,a){}},[[153,1,2]]]);
//# sourceMappingURL=main.01675ddf.chunk.js.map